(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t(16),o=t.n(a),r=t(17),i=t(3),l=t(5),u=t.n(l),s="/api/persons",d=function(){return u.a.get(s)},j=function(e){return u.a.post(s,e)},b=function(e,n){return u.a.put("".concat(s,"/").concat(e),n)},f=function(e,n){return u.a.delete("".concat(s,"/").concat(e),n)},h=t(0),m=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"success",children:n})},O=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"error",children:n})},p=function(e){var n=e.person,t=e.deleteContact;return Object(h.jsxs)("div",{children:[n.name," ",n.phonenumber," ",n.filterName,Object(h.jsx)("button",{onClick:function(){return t(n)},children:" Delete "})]})},g=function(e){return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{children:["filter shown with"," ",Object(h.jsx)("input",{value:e.filterName,onChange:e.handleFilterNameChange})]})})},x=function(e,n){return Object(h.jsx)("div",{children:e.persons.map((function(n,t){return n.name.includes(e.filterName)?Object(h.jsx)(p,{person:n,filterName:e.filterName,deleteContact:e.deleteContact},t):null}))})},v=function(e){return Object(h.jsx)("form",{onSubmit:e.addName,children:Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(h.jsx)("button",{type:"submit",children:"add"})]})})},N=function(){return Object(h.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[Object(h.jsx)("br",{}),Object(h.jsx)("em",{children:"Phonebook app, Department of Computer Science, University of Helsinki 2021"})]})},w=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)("a new name"),l=Object(i.a)(o,2),u=l[0],s=l[1],p=Object(c.useState)(""),w=Object(i.a)(p,2),C=w[0],S=w[1],k=Object(c.useState)(""),y=Object(i.a)(k,2),D=y[0],E=y[1],F=Object(c.useState)(null),I=Object(i.a)(F,2),J=I[0],P=I[1],T=Object(c.useState)(null),z=Object(i.a)(T,2),A=z[0],B=z[1];Object(c.useEffect)((function(){d().then((function(e){a(e.data)}))}),[]);var H=function(e){B(e),setTimeout((function(){B(null)}),5e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(O,{message:A}),Object(h.jsx)(m,{message:J}),Object(h.jsx)(g,{filterName:D,handleFilterNameChange:function(e){E(e.target.value)}}),Object(h.jsx)("h3",{children:"add a new"}),Object(h.jsx)(v,{addName:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===u})),c={name:u,number:C};if(n.length>0){var o=n[0];window.confirm("".concat(o.name," is alredy added to phonebook, replace the old number with a new one?"))&&(console.log("deleting note id: ".concat(o.id)),b(o.id,c).then((function(e){console.log(e.data),a([].concat(Object(r.a)(t.filter((function(e){return e.id!==o.id}))),[e.data]))})))}else j(c).then((function(e){a(t.concat(e.data)),s(""),S(""),console.log(e.data),P("Added ".concat(u," ")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){e.response&&(H(e.response.data.error),console.warn(e.response.data.error))}))},newName:u,handleNameChange:function(e){s(e.target.value),console.log(t.filter((function(e){return e.name===u})))},newNumber:C,handleNumberChange:function(e){console.log(e.target.value),S(e.target.value)}}),Object(h.jsx)("h3",{children:"Numbers"}),Object(h.jsx)(x,{persons:t,filterName:D,deleteContact:function(e){window.confirm("Delete ".concat(e.name,"? "))&&(console.log("deleting note id: ".concat(e.id)),f(e.id).then((function(n){console.log(n),a(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){H("Information of"+e.name+"has already been removed from server")})))}}),Object(h.jsx)(N,{})]})};t(41);o.a.render(Object(h.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.01b3d8dd.chunk.js.map